# СТРУКТУРНЫЕ МОДЕЛИ

## ДИАГРАММА КЛАССОВ

![CLASS DIAGRAM](https://github.com/sinseiwas/PROspekt_bot/blob/6f114c38f306705f66f52ab27425723968cb7aff/docs/diagrams/class_diagram.png)

### Диаграмма классов представляет собой описание структуры и взаимодействия классов в приложении.

1. **Bot (Телеграм Бот)**:
    - **Атрибуты**:
        - `token: str` - Токен для аутентификации Telegram бота.
        - `parse_mode: str` - Режим парсинга сообщений (например, HTML).
    - **Методы**:
        - `start()` - Метод для запуска бота.
        - `stop()` - Метод для остановки бота.

2. **Dispatcher (Диспетчер)**:
    - **Методы**:
        - `include_routers(routers: list)` - Метод для включения маршрутизаторов.
        - `start_polling(bot: Bot)` - Метод для запуска обработки событий.

3. **Router (Маршрутизатор)**:
    - **Методы**:
        - `message(handler: Callable)` - Метод для добавления обработчика сообщений.
        - `callback_query(handler: Callable)` - Метод для добавления обработчика callback-запросов.

4. **MessageHandler (Обработчик сообщений)**:
    - **Методы**:
        - `handle_message(message: Message)` - Метод для обработки входящих сообщений.

5. **CallbackQueryHandler (Обработчик callback-запросов)**:
    - **Методы**:
        - `handle_callback_query(callback_query: CallbackQuery)` - Метод для обработки callback-запросов.

6. **Database (База данных)**:
    - **Методы**:
        - `query(sql: str)` - Метод для выполнения SQL-запросов.
        - `commit()` - Метод для фиксации транзакции.

7. **CustomKeyboards (Пользовательские клавиатуры)**:
    - **Методы**:
        - `get_org_keyboard(): InlineKeyboardMarkup` - Метод для создания клавиатуры с информацией о должностных лицах.
        - `get_cp_kb(): InlineKeyboardMarkup` - Метод для создания клавиатуры с контент-планом.
        - `get_name_cp_kb(): InlineKeyboardMarkup` - Метод для создания клавиатуры с названиями постов.
        - `get_start_kb(): ReplyKeyboardMarkup` - Метод для создания стартовой клавиатуры.

#### Взаимосвязи

- `Bot` использует `Dispatcher` для диспетчеризации событий и сообщений.
- `Dispatcher` использует `Router` для маршрутизации сообщений и callback-запросов.
- `Router` управляет обработчиками сообщений (`MessageHandler`) и callback-запросов (`CallbackQueryHandler`).
- Обработчики сообщений (`MessageHandler`) и callback-запросов (`CallbackQueryHandler`) взаимодействуют с классом `Database` для получения данных.
- Класс `CustomKeyboards` предоставляет методы для создания клавиатур, которые используются в `Router` для взаимодействия с пользователями.


## ДИАГРАММА КОМПОНЕНТОВ

![COMPONENT DIAGRAM](https://github.com/sinseiwas/PROspekt_bot/blob/f2e677db6c02a408abd6ac0dca202f4b1c9c182a/docs/diagrams/component_diagram.png)

### Диаграмма компонентов показывает основные компоненты приложения и взаимодействие между ними.

1. Telegram Bot Application
Основной пакет, включающий все компоненты приложения Telegram бота. Он организует структуру и отвечает за взаимодействие между всеми компонентами.

2. Bot
**Описание:**
Компонент Bot представляет самого Telegram бота. Он отвечает за инициализацию, настройку и запуск бота. Взаимодействует с Dispatcher для обработки сообщений и событий.

3. Dispatcher
**Описание:**
Компонент Dispatcher отвечает за распределение задач между различными обработчиками событий и сообщений. Он координирует работу маршрутизаторов (Router) и запускает процесс обработки сообщений.

4. Router
**Описание:**
Компонент Router управляет маршрутизацией сообщений и callback-запросов к соответствующим обработчикам. Он содержит логику обработки сообщений и callback-запросов и направляет их в соответствующие обработчики.

5. Handlers
**Описание:**
Пакет Handlers содержит компоненты для обработки сообщений и callback-запросов.
- **MessageHandler:**
  Обрабатывает входящие сообщения от пользователей.
- **CallbackQueryHandler:**
  Обрабатывает callback-запросы от пользователей (например, нажатия кнопок inline-клавиатуры).

6. Database
**Описание:**
Пакет Database содержит компоненты для работы с базой данных.
- **DBConnector:**
  Обеспечивает подключение к базе данных.
- **UserRepository:**
  Управляет данными пользователей.
- **ContentRepository:**
  Управляет контентом (например, постами, статьями).

7. External Services
**Описание:**
Пакет External Services включает компоненты для работы с внешними сервисами.
- **ExternalAPI:**
  Компонент для взаимодействия с внешними API.
- **FileStorageService:**
  Компонент для работы с файловыми хранилищами (например, загрузка и скачивание файлов).

#### Взаимосвязи
- Bot взаимодействует с Dispatcher для инициализации и управления ботом.
- Dispatcher использует Router для маршрутизации сообщений и callback-запросов к соответствующим обработчикам.
- Router направляет сообщения и callback-запросы к MessageHandler и CallbackQueryHandler соответственно.
- MessageHandler и CallbackQueryHandler взаимодействуют с компонентами из пакета Database для получения и сохранения данных.
- MessageHandler и CallbackQueryHandler также могут взаимодействовать с компонентами из пакета External Services для выполнения внешних API-запросов и работы с файлами.
